title: IssuedDocument
type: object
description: ''
properties:
  id:
    type: integer
    description: Unique identifier of the document.
  entity:
    $ref: ./Entity.yaml
  type:
    $ref: ../enums/IssuedDocumentType.yaml
  number:
    type: integer
    description: |-
      Number of the document
      [If not specified, next number is used]
    example: 1
  numeration:
    type: string
    description: |-
      Numeration of the document
      [Not available if type=delivery_note]
    example: /A
  date:
    type: string
    description: |-
      Date of the document
      [If not specified, today date is used]
    format: date
  year:
    type: integer
    description: Invoice year.
  currency:
    $ref: ./Currency.yaml
  language:
    $ref: ./Language.yaml
  subject:
    type: string
    description: Issued document subject.
  visible_subject:
    type: string
    description: Issued document visible subject.
  rc_center:
    type: string
    description: Revenue center [or cost center if type=supplier_order].
  notes:
    type: string
    description: Issued document extra notes.
  rivalsa:
    maximum: 100
    minimum: 0
    type: number
    description: '"Rivalsa INPS" percentual value'
  cassa:
    maximum: 100
    minimum: 0
    type: number
    description: '"Cassa previdenziale" percentual value'
  amount_cassa:
    type: number
    description: |-
      [Read Only]
      Cassa amount.
    readOnly: true
  cassa_taxable:
    type: number
    minimum: 0
    maximum: 100
    description: Cassa taxable percentage
  amount_cassa_taxable:
    type: number
    nullable: true
    description: |-
      [Can be set only if cassa_taxable is NULL]
      Cassa2 taxable amount
  cassa2:
    maximum: 100
    minimum: 0
    type: number
    description: '"Cassa previdenziale 2" percentual value'
  amount_cassa2:
    type: number
    nullable: true
    description: |-
      [Read Only]
      Cassa amount.
    readOnly: true
  cassa2_taxable:
    type: number
    minimum: 0
    maximum: 100
    description: Cassa2 taxable percentage
  amount_cassa2_taxable:
    type: number
    nullable: true
    description: |-
      [Can be set only if cassa2_taxable is NULL]
      Cassa2 taxable amount
  global_cassa_taxable:
    type: number
    minimum: 0
    maximum: 100
    description: Global cassa taxable percentage
  amount_global_cassa_taxable:
    type: number
    nullable: true
    description: |-
      [Can be set only if global_cassa_taxable is NULL]
      Global cassa taxable amount
  withholding_tax:
    maximum: 100
    minimum: 0
    type: number
    description: Withholding tax (ritenuta d'acconto) percentual value
  withholding_tax_taxable:
    maximum: 100
    minimum: 0
    type: number
    description: Withholding tax taxable (imponibile) percentual value
  other_withholding_tax:
    maximum: 100
    minimum: 0
    type: number
    description: Other withholding tax (altra ritenuta) percentual value
  stamp_duty:
    type: number
    description: |-
      Stamp duty value
      [0 if not present]
  payment_method:
    $ref: ./PaymentMethod.yaml
  use_split_payment:
    type: boolean
    default: false
    description: Use split payment
  use_gross_prices:
    type: boolean
    default: false
    description: Use gross prices
  e_invoice:
    type: boolean
    description: Indicates if this is an e-invoice.
    default: false
  ei_data:
    type: object
    nullable: true
    description: |-
      E-invoice data.
      [Only if e_invoice=true]
    properties:
      vat_kind:
        $ref: ../enums/VatKind.yaml
      original_document_type:
        $ref: ../enums/OriginalDocumentType.yaml
      od_number:
        type: string
        nullable: true
        description: Original document number.
      od_date:
        type: string
        description: Original document date.
        format: date
        nullable: true
      cig:
        type: string
        nullable: true
        description: CIG.
      cup:
        type: string
        nullable: true
        description: CUP.
      payment_method:
        type: string
        nullable: true
        description: >-
          Payment method (see
          https://www.fatturapa.gov.it/export/documenti/fatturapa/v1.2.1/Rappresentazione-tabellare-fattura-ordinaria.pdf
          for the accepted values of ModalitaPagamento).
      bank_name:
        type: string
        nullable: true
        description: Bank name.
      bank_iban:
        type: string
        nullable: true
        description: IBAN.
      bank_beneficiary:
        type: string
        nullable: true
        description: Bank beneficiary.
      invoice_number:
        type: string
        description: Invoice number.
        nullable: true
      invoice_date:
        type: string
        format: date
        description: Invoice date.
        nullable: true
  ei_cassa_type:
    type: string
    nullable: true
    description: Einvoice cassa type
  ei_cassa2_type:
    type: string
    nullable: true
    description: Einvoice cassa2 type
  ei_withholding_tax_causal:
    type: string
    nullable: true
    description: Einvoice withholding tax causal
  ei_other_withholding_tax_type:
    type: string
    nullable: true
    description: Einvoice other withholding tax type
  ei_other_withholding_tax_causal:
    type: string
    nullable: true
    description: Einvoice other withholding tax causal
  items_list:
    type: array
    nullable: true
    items:
      type: object
      properties:
        product_id:
          type: integer
          nullable: true
          description: Unique identifier of the product.
          example: 1234
        code:
          type: string
          description: Product code.
          example: '239874892374982'
        name:
          type: string
          description: Product name.
          example: Water bottle
        category:
          type: string
          description: Product category
        description:
          type: string
          description: Product description.
        qty:
          type: number
          description: Items quantity,
        measure:
          type: string
          description: Item measure.
        net_price:
          type: number
          description: Net price.
          example: 1.23
        gross_price:
          type: number
          nullable: true
          description: Gross price.
          example: 1.45
        vat:
          $ref: ./VatType.yaml
        not_taxable:
          type: boolean
          default: false
        apply_withholding_taxes:
          type: boolean
          description: Apply withholding taxes, rivalsa and cassa.
          default: true
        discount:
          maximum: 100
          minimum: 0
          type: number
          description: Discount percentual value.
        discount_highlight:
          type: boolean
          default: false
        in_ddt:
          type: boolean
          default: true
        stock:
          type: boolean
          nullable: true
        ei_raw:
          type: object
          description: Advanced raw attributes for e-invoices.
  payments_list:
    type: array
    nullable: true
    items:
      type: object
      properties:
        due_date:
          type: string
          description: Due date.
          format: date
          example: '2018-04-03'
        amount:
          type: number
          description: Payment amount.
          example: 1.45
        status:
          $ref: ../enums/IssuedDocumentStatus.yaml
        payment_account:
          $ref: ./PaymentAccount.yaml
        paid_date:
          type: string
          description: |-
            Payment date.
            [Only if status is paid]
          format: date
          example: '2018-04-03'
        ei_raw:
          type: object
          nullable: true
          description: Advanced raw attributes for e-invoices.
  template:
    $ref: ./DocumentTemplate.yaml
  delivery_note_template:
    $ref: ./DocumentTemplate.yaml
  acc_inv_template:
    $ref: ./DocumentTemplate.yaml
  h_margins:
    type: integer
    description: Horizontal margins.
  v_margins:
    type: integer
    description: Vertical margins.
  show_payments:
    type: boolean
    description: Shows the expiration dates of the payments on the document.
  show_payment_method:
    type: boolean
    description: Show the payment method details on the document.
  show_totals:
    $ref: ../enums/ShowTotalsMode.yaml
  show_paypal_button:
    type: boolean
    default: false
    description: Show paypal button
  show_notification_button:
    type: boolean
    default: false
    description: Show notification button
  show_tspay_button:
    type: boolean
    description: Show ts pay button.
    nullable: true
  delivery_note:
    type: boolean
  accompanying_invoice:
    type: boolean
    description: Attach an accompanying invoice.
    default: false
  dn_number:
    type: integer
    description: Number (for the attached delivery note).
  dn_date:
    type: string
    description: Date (for the attached delivery note).
    format: date
  dn_ai_packages_number:
    type: string
    nullable: true
    description: Number of packages (for the attached delivery note).
  dn_ai_weight:
    type: string
    nullable: true
    description: Weight (for the attached delivery note).
  dn_ai_causal:
    type: string
    nullable: true
    description: Causal (for the attached delivery note).
  dn_ai_destination:
    type: string
    nullable: true
    description: Destination (for the attached delivery note).
  dn_ai_transporter:
    type: string
    nullable: true
    description: Transporter (for the attached delivery note).
  dn_ai_notes:
    type: string
    nullable: true
    description: Notes (for the attached delivery note).
  refers_to:
    type: object
    description: >-
      Link to another document (e.g. the original proforma or the quote from
      which this has been created).
    properties:
      id:
        type: integer
        description: >-
          Unique identifier of the linked document (can be null if the document
          has been deleted or other reasons).
      date:
        type: string
        description: Date of the linked document.
        format: date
      number:
        type: integer
        description: Number of the linked document.
      numeration:
        type: string
        description: Numeration of the linked document.
      description:
        type: string
        description: Description to show.
  is_marked:
    type: boolean
    description: This is true if the document is marked.
  amount_net:
    type: number
    description: |-
      [Read Only]
      Total net amount (competenze).
    readOnly: true
  amount_vat:
    type: number
    description: |-
      [Read Only]
      Total vat amount (IVA).
    readOnly: true
  amount_gross:
    type: number
    description: |-
      [Read Only]
      Total gross amount (totale documento).
    readOnly: true
  amount_due_discount:
    type: number
    description: Amount due discount
  amount_rivalsa:
    type: number
    description: |-
      [Read Only]
      Rivalsa amount.
    readOnly: true
  amount_rivalsa_taxable:
    type: number
    nullable: true
    description: Taxable rivalsa amount
  amount_withholding_tax:
    type: number
    description: |-
      [Read Only]
      Withholding tax amount (ritenuta d'acconto).
    readOnly: true
  amount_withholding_tax_taxable:
    type: number
    nullable: true
    description: Taxable withholding tax amount
  amount_other_withholding_tax:
    type: number
    description: |-
      [Read Only]
      Other withholding tax amount (altra ritenuta).
    readOnly: true
  amount_other_withholding_tax_taxable:
    type: number
    nullable: true
    description: Taxable other withholding tax amount
  amount_enasarco_taxable:
    type: number
    nullable: true
    description: Taxable enasarco amount
  extra_data:
    type: object
    nullable: true
    description: >-
      Extra data.

      TS fields follow the technical specifications provided by "Sistema Tessera
      Sanitaria".
    properties:
      show_sofort_button:
        type: boolean
        nullable: true
      multifatture_sent:
        type: integer
        nullable: true
      ts_communication:
        type: boolean
        nullable: true
      ts_flag_tipo_spesa:
        type: number
        description: 1 => TK (Ticket di pronto soccorso); 2 => SR (Visita in intramoenia)
        nullable: true
      ts_pagamento_tracciato:
        type: boolean
        nullable: true
      ts_tipo_spesa:
        type: string
        description: >-
          Can be [ 'TK', 'FC', 'FV', 'SV', 'SP', 'AD', 'AS', 'SR', 'CT', 'PI',
          'IC', 'AA' ]. Refer to the technical specifications to learn more.
        nullable: true
      ts_opposizione:
        type: boolean
        nullable: true
      ts_status:
        type: integer
        nullable: true
      ts_file_id:
        type: string
        nullable: true
      ts_sent_date:
        type: string
        nullable: true
        format: date
      ts_full_amount:
        type: boolean
        nullable: true
      imported_by:
        type: string
        nullable: true
      ts_single_sending:
        type: boolean
        nullable: true
  seen_date:
    type: string
    nullable: true
    description: Date when the client/supplier has seen the document.
    format: date
  next_due_date:
    type: string
    nullable: true
    description: Date of the next not paid payment.
    format: date
  url:
    type: string
    description: Public url of the document PDF file.
  attachment_url:
    type: string
    description: >-
      [Read Only]

      Public url of the attached file. Authomatically set if a valid attachment
      token is passed via POST /issued_documents or PUT
      /issued_documents/{documentId}.
    readOnly: true
  attachment_token:
    type: string
    nullable: true
    description: >-
      [Write Only]

      Attachment token returned by POST /issued_documents/attachment. Used to
      attach the file already uploaded.
    writeOnly: true
  ei_raw:
    type: object
    nullable: true
    description: Advanced raw attributes for e-invoices.
  ei_status:
    type: string
    description: |
      [Read only] Status of the e-invoice.
        * `attempt` - We are trying to send the invoice, please wait up to 2 hours
        * `missing` - The invoice is missing
        * `not_sent` - The invoice has yet to be sent
        * `pending` - The checks for the digital signature and sending are in progress
        * `processing` - The SDI is delivering the invoice to the customer
        * `error` - An error occurred while handling the invoice, please try to resend it or contact support
        * `discarded` - The invoice has been rejected by the SDI, so it must be corrected and re-sent
        * `not_delivered` - The SDI was unable to deliver the invoice
        * `accepted` - The customer accepted the invoice
        * `rejected` - The customer rejected the invoice, so it must be corrected
        * `no_response` - A response has not yet been received whithin the deadline, contact the customer to ascertain the status of the invoice
    enum:
      - attempt
      - missing
      - not_sent
      - pending
      - processing
      - error
      - discarded
      - not_delivered
      - accepted
      - rejected
      - no_response
