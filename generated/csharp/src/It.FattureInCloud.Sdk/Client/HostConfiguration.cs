/*
 * Fatture in Cloud API v2 - API Reference
 *
 * Connect your software with Fatture in Cloud, the invoicing platform chosen by more than 500.000 businesses in Italy.   The Fatture in Cloud API is based on REST, and makes possible to interact with the user related data prior authorization via OAuth2 protocol.
 *
 * The version of the OpenAPI document: 2.1.5
 * Contact: info@fattureincloud.it
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Net.Http;
using Microsoft.Extensions.DependencyInjection;
using It.FattureInCloud.Sdk.Api;
using It.FattureInCloud.Sdk.Model;

namespace It.FattureInCloud.Sdk.Client
{
    /// <summary>
    /// Provides hosting configuration for It.FattureInCloud.Sdk
    /// </summary>
    public class HostConfiguration
    {
        private readonly IServiceCollection _services;
        private readonly JsonSerializerOptions _jsonOptions = new JsonSerializerOptions();

        internal bool HttpClientsAdded { get; private set; }

        /// <summary>
        /// Instantiates the class 
        /// </summary>
        /// <param name="services"></param>
        public HostConfiguration(IServiceCollection services)
        {
            _services = services;
            _jsonOptions.Converters.Add(new JsonStringEnumConverter());
            _jsonOptions.Converters.Add(new DateTimeJsonConverter());
            _jsonOptions.Converters.Add(new DateTimeNullableJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyNullableJsonConverter());
            _jsonOptions.Converters.Add(new ArchiveDocumentJsonConverter());
            _jsonOptions.Converters.Add(new AttachmentDataJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryDocumentJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryKindJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryKindNullableJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryTypeJsonConverter());
            _jsonOptions.Converters.Add(new CashbookEntryTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new CityJsonConverter());
            _jsonOptions.Converters.Add(new ClientTypeJsonConverter());
            _jsonOptions.Converters.Add(new ClientTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new CompanyJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoAccessInfoJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoPlanInfoJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoPlanInfoFunctionsJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoPlanInfoFunctionsStatusJsonConverter());
            _jsonOptions.Converters.Add(new CompanyInfoPlanInfoLimitsJsonConverter());
            _jsonOptions.Converters.Add(new CompanyPlanUsageJsonConverter());
            _jsonOptions.Converters.Add(new CompanyTypeJsonConverter());
            _jsonOptions.Converters.Add(new CompanyTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ControlledCompanyJsonConverter());
            _jsonOptions.Converters.Add(new CreateArchiveDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateArchiveDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateCashbookEntryRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateCashbookEntryResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateClientRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateClientResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateF24RequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateF24ResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateIssuedDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateIssuedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreatePaymentAccountRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreatePaymentAccountResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreatePaymentMethodRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreatePaymentMethodResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateProductRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateProductResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateReceiptRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateReceiptResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateReceivedDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateReceivedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateSupplierRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateSupplierResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateVatTypeRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateVatTypeResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateWebhooksSubscriptionRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateWebhooksSubscriptionResponseJsonConverter());
            _jsonOptions.Converters.Add(new CurrencyJsonConverter());
            _jsonOptions.Converters.Add(new DetailedCountryJsonConverter());
            _jsonOptions.Converters.Add(new DocumentTemplateJsonConverter());
            _jsonOptions.Converters.Add(new EInvoiceRejectionReasonJsonConverter());
            _jsonOptions.Converters.Add(new EmailJsonConverter());
            _jsonOptions.Converters.Add(new EmailAttachmentJsonConverter());
            _jsonOptions.Converters.Add(new EmailDataJsonConverter());
            _jsonOptions.Converters.Add(new EmailDataDefaultSenderEmailJsonConverter());
            _jsonOptions.Converters.Add(new EmailRecipientStatusJsonConverter());
            _jsonOptions.Converters.Add(new EmailRecipientStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new EmailScheduleJsonConverter());
            _jsonOptions.Converters.Add(new EmailScheduleIncludeJsonConverter());
            _jsonOptions.Converters.Add(new EmailStatusJsonConverter());
            _jsonOptions.Converters.Add(new EmailStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new EntityJsonConverter());
            _jsonOptions.Converters.Add(new EntityClientPreCreateInfoJsonConverter());
            _jsonOptions.Converters.Add(new EntityTypeJsonConverter());
            _jsonOptions.Converters.Add(new EntityTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new EventTypeJsonConverter());
            _jsonOptions.Converters.Add(new EventTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new F24JsonConverter());
            _jsonOptions.Converters.Add(new F24StatusJsonConverter());
            _jsonOptions.Converters.Add(new F24StatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new FattureInCloudPlanTypeJsonConverter());
            _jsonOptions.Converters.Add(new FattureInCloudPlanTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new FunctionStatusJsonConverter());
            _jsonOptions.Converters.Add(new GetArchiveDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetBinIssuedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetBinReceivedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetCashbookEntryResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetClientResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetCompanyInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetCompanyPlanUsageResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetEInvoiceRejectionReasonResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetEmailDataResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetEntityClientPreCreateInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetExistingIssuedDocumentTotalsRequestJsonConverter());
            _jsonOptions.Converters.Add(new GetExistingIssuedDocumentTotalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetExistingReceivedDocumentTotalsRequestJsonConverter());
            _jsonOptions.Converters.Add(new GetExistingReceivedDocumentTotalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetF24ResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetIssuedDocumentPreCreateInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetIssuedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetNewIssuedDocumentTotalsRequestJsonConverter());
            _jsonOptions.Converters.Add(new GetNewIssuedDocumentTotalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetNewReceivedDocumentTotalsRequestJsonConverter());
            _jsonOptions.Converters.Add(new GetNewReceivedDocumentTotalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetPaymentAccountResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetPaymentMethodResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetPriceListItemsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetProductResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetReceiptPreCreateInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetReceiptResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetReceiptsMonthlyTotalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetReceivedDocumentPreCreateInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetReceivedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetSupplierResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetTaxProfileResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetUserInfoResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetUserInfoResponseEmailConfirmationStateJsonConverter());
            _jsonOptions.Converters.Add(new GetUserInfoResponseInfoJsonConverter());
            _jsonOptions.Converters.Add(new GetVatTypeResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetWebhooksSubscriptionResponseJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentEiDataJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentExtraDataJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentItemsListItemJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentOptionsJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPaymentsListItemJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPaymentsListItemPaymentTermsJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPreCreateInfoJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPreCreateInfoDefaultValuesJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPreCreateInfoExtraDataDefaultValuesJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentPreCreateInfoItemsDefaultValuesJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentStatusJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentTotalsJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentTypeJsonConverter());
            _jsonOptions.Converters.Add(new IssuedDocumentTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new JoinIssuedDocumentsResponseJsonConverter());
            _jsonOptions.Converters.Add(new LanguageJsonConverter());
            _jsonOptions.Converters.Add(new ListArchiveCategoriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListArchiveDocumentsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListArchiveDocumentsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListBinIssuedDocumentsJsonConverter());
            _jsonOptions.Converters.Add(new ListBinReceivedDocumentsJsonConverter());
            _jsonOptions.Converters.Add(new ListCashbookEntriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListCitiesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListClientsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListClientsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListCostCentersResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListCountriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListCurrenciesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListDeliveryNotesDefaultCausalsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListDetailedCountriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListEmailsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListEmailsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListF24ResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListF24ResponseAggregatedDataJsonConverter());
            _jsonOptions.Converters.Add(new ListF24ResponseAggregationJsonConverter());
            _jsonOptions.Converters.Add(new ListF24ResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListIssuedDocumentsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListIssuedDocumentsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListLanguagesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListPaymentAccountsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListPaymentMethodsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListPriceListsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListProductCategoriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListProductsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListProductsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListReceiptsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListReceiptsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListReceivedDocumentCategoriesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListReceivedDocumentsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListReceivedDocumentsResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListRevenueCentersResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListSuppliersResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListSuppliersResponsePageJsonConverter());
            _jsonOptions.Converters.Add(new ListTemplatesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListUnitsOfMeasureResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListUserCompaniesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListUserCompaniesResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new ListVatTypesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListWebhooksSubscriptionsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModelClientJsonConverter());
            _jsonOptions.Converters.Add(new ModifyArchiveDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyArchiveDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyCashbookEntryRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyCashbookEntryResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyClientRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyClientResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyF24RequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyF24ResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyIssuedDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyIssuedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyPaymentAccountRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyPaymentAccountResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyPaymentMethodRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyPaymentMethodResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyProductRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyProductResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyReceiptRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyReceiptResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyReceivedDocumentRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyReceivedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifySupplierRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifySupplierResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyVatTypeRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyVatTypeResponseJsonConverter());
            _jsonOptions.Converters.Add(new ModifyWebhooksSubscriptionRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyWebhooksSubscriptionResponseJsonConverter());
            _jsonOptions.Converters.Add(new MonthlyTotalJsonConverter());
            _jsonOptions.Converters.Add(new OriginalDocumentTypeJsonConverter());
            _jsonOptions.Converters.Add(new OriginalDocumentTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new PaginationJsonConverter());
            _jsonOptions.Converters.Add(new PaymentAccountJsonConverter());
            _jsonOptions.Converters.Add(new PaymentAccountTypeJsonConverter());
            _jsonOptions.Converters.Add(new PaymentAccountTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new PaymentMethodJsonConverter());
            _jsonOptions.Converters.Add(new PaymentMethodDetailsJsonConverter());
            _jsonOptions.Converters.Add(new PaymentMethodTypeJsonConverter());
            _jsonOptions.Converters.Add(new PaymentMethodTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new PaymentTermsTypeJsonConverter());
            _jsonOptions.Converters.Add(new PaymentTermsTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new PermissionLevelJsonConverter());
            _jsonOptions.Converters.Add(new PermissionLevelNullableJsonConverter());
            _jsonOptions.Converters.Add(new PermissionsJsonConverter());
            _jsonOptions.Converters.Add(new PermissionsFicIssuedDocumentsDetailedJsonConverter());
            _jsonOptions.Converters.Add(new PriceListJsonConverter());
            _jsonOptions.Converters.Add(new PriceListItemJsonConverter());
            _jsonOptions.Converters.Add(new PriceListPricesTypeJsonConverter());
            _jsonOptions.Converters.Add(new PriceListPricesTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new PriceListTypeJsonConverter());
            _jsonOptions.Converters.Add(new PriceListTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ProductJsonConverter());
            _jsonOptions.Converters.Add(new ReceiptJsonConverter());
            _jsonOptions.Converters.Add(new ReceiptItemsListItemJsonConverter());
            _jsonOptions.Converters.Add(new ReceiptPreCreateInfoJsonConverter());
            _jsonOptions.Converters.Add(new ReceiptTypeJsonConverter());
            _jsonOptions.Converters.Add(new ReceiptTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentInfoJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentInfoDefaultValuesJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentInfoItemsDefaultValuesJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentItemsListItemJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentPaymentsListItemJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentPaymentsListItemPaymentTermsJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentTotalsJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentTypeJsonConverter());
            _jsonOptions.Converters.Add(new ReceivedDocumentTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ScheduleEmailRequestJsonConverter());
            _jsonOptions.Converters.Add(new SendEInvoiceRequestJsonConverter());
            _jsonOptions.Converters.Add(new SendEInvoiceRequestDataJsonConverter());
            _jsonOptions.Converters.Add(new SendEInvoiceRequestOptionsJsonConverter());
            _jsonOptions.Converters.Add(new SendEInvoiceResponseJsonConverter());
            _jsonOptions.Converters.Add(new SendEInvoiceResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new SenderEmailJsonConverter());
            _jsonOptions.Converters.Add(new ShowTotalsModeJsonConverter());
            _jsonOptions.Converters.Add(new ShowTotalsModeNullableJsonConverter());
            _jsonOptions.Converters.Add(new SupplierJsonConverter());
            _jsonOptions.Converters.Add(new SupplierTypeJsonConverter());
            _jsonOptions.Converters.Add(new SupplierTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new TaxProfileJsonConverter());
            _jsonOptions.Converters.Add(new TransformIssuedDocumentResponseJsonConverter());
            _jsonOptions.Converters.Add(new UploadArchiveAttachmentResponseJsonConverter());
            _jsonOptions.Converters.Add(new UploadF24AttachmentResponseJsonConverter());
            _jsonOptions.Converters.Add(new UploadIssuedDocumentAttachmentResponseJsonConverter());
            _jsonOptions.Converters.Add(new UploadReceivedDocumentAttachmentResponseJsonConverter());
            _jsonOptions.Converters.Add(new UserJsonConverter());
            _jsonOptions.Converters.Add(new UserCompanyRoleJsonConverter());
            _jsonOptions.Converters.Add(new UserCompanyRoleNullableJsonConverter());
            _jsonOptions.Converters.Add(new VatItemJsonConverter());
            _jsonOptions.Converters.Add(new VatKindJsonConverter());
            _jsonOptions.Converters.Add(new VatKindNullableJsonConverter());
            _jsonOptions.Converters.Add(new VatTypeJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlErrorResponseJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlErrorResponseErrorJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlErrorResponseErrorValidationResultJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlErrorResponseExtraJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlResponseJsonConverter());
            _jsonOptions.Converters.Add(new VerifyEInvoiceXmlResponseDataJsonConverter());
            _jsonOptions.Converters.Add(new VerifyWebhooksSubscriptionJsonConverter());
            _jsonOptions.Converters.Add(new VerifyWebhooksSubscriptionRequestJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionConfigJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionMappingJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionMappingNullableJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionVerificationMethodJsonConverter());
            _jsonOptions.Converters.Add(new WebhooksSubscriptionVerificationMethodNullableJsonConverter());
            JsonSerializerOptionsProvider jsonSerializerOptionsProvider = new(_jsonOptions);
            _services.AddSingleton(jsonSerializerOptionsProvider);
            _services.AddSingleton<IApiFactory, ApiFactory>();
            _services.AddSingleton<ArchiveApiEvents>();
            _services.AddSingleton<CashbookApiEvents>();
            _services.AddSingleton<ClientsApiEvents>();
            _services.AddSingleton<CompaniesApiEvents>();
            _services.AddSingleton<EmailsApiEvents>();
            _services.AddSingleton<InfoApiEvents>();
            _services.AddSingleton<IssuedDocumentsApiEvents>();
            _services.AddSingleton<IssuedEInvoicesApiEvents>();
            _services.AddSingleton<PriceListsApiEvents>();
            _services.AddSingleton<ProductsApiEvents>();
            _services.AddSingleton<ReceiptsApiEvents>();
            _services.AddSingleton<ReceivedDocumentsApiEvents>();
            _services.AddSingleton<SettingsApiEvents>();
            _services.AddSingleton<SuppliersApiEvents>();
            _services.AddSingleton<TaxesApiEvents>();
            _services.AddSingleton<UserApiEvents>();
            _services.AddSingleton<WebhooksApiEvents>();
        }

        /// <summary>
        /// Configures the HttpClients.
        /// </summary>
        /// <param name="client"></param>
        /// <param name="builder"></param>
        /// <returns></returns>
        public HostConfiguration AddApiHttpClients
        (
            Action<HttpClient>? client = null, Action<IHttpClientBuilder>? builder = null)
        {
            if (client == null)
                client = c => c.BaseAddress = new Uri(ClientUtils.BASE_ADDRESS);

            List<IHttpClientBuilder> builders = new List<IHttpClientBuilder>();

            builders.Add(_services.AddHttpClient<IArchiveApi, ArchiveApi>(client));
            builders.Add(_services.AddHttpClient<ICashbookApi, CashbookApi>(client));
            builders.Add(_services.AddHttpClient<IClientsApi, ClientsApi>(client));
            builders.Add(_services.AddHttpClient<ICompaniesApi, CompaniesApi>(client));
            builders.Add(_services.AddHttpClient<IEmailsApi, EmailsApi>(client));
            builders.Add(_services.AddHttpClient<IInfoApi, InfoApi>(client));
            builders.Add(_services.AddHttpClient<IIssuedDocumentsApi, IssuedDocumentsApi>(client));
            builders.Add(_services.AddHttpClient<IIssuedEInvoicesApi, IssuedEInvoicesApi>(client));
            builders.Add(_services.AddHttpClient<IPriceListsApi, PriceListsApi>(client));
            builders.Add(_services.AddHttpClient<IProductsApi, ProductsApi>(client));
            builders.Add(_services.AddHttpClient<IReceiptsApi, ReceiptsApi>(client));
            builders.Add(_services.AddHttpClient<IReceivedDocumentsApi, ReceivedDocumentsApi>(client));
            builders.Add(_services.AddHttpClient<ISettingsApi, SettingsApi>(client));
            builders.Add(_services.AddHttpClient<ISuppliersApi, SuppliersApi>(client));
            builders.Add(_services.AddHttpClient<ITaxesApi, TaxesApi>(client));
            builders.Add(_services.AddHttpClient<IUserApi, UserApi>(client));
            builders.Add(_services.AddHttpClient<IWebhooksApi, WebhooksApi>(client));
            
            if (builder != null)
                foreach (IHttpClientBuilder instance in builders)
                    builder(instance);

            HttpClientsAdded = true;

            return this;
        }

        /// <summary>
        /// Configures the JsonSerializerSettings
        /// </summary>
        /// <param name="options"></param>
        /// <returns></returns>
        public HostConfiguration ConfigureJsonOptions(Action<JsonSerializerOptions> options)
        {
            options(_jsonOptions);

            return this;
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="token"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(TTokenBase token) where TTokenBase : TokenBase
        {
            return AddTokens(new TTokenBase[]{ token });
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="tokens"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(IEnumerable<TTokenBase> tokens) where TTokenBase : TokenBase
        {
            TokenContainer<TTokenBase> container = new TokenContainer<TTokenBase>(tokens);
            _services.AddSingleton(services => container);

            return this;
        }

        /// <summary>
        /// Adds a token provider to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenProvider"></typeparam>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <returns></returns>
        public HostConfiguration UseProvider<TTokenProvider, TTokenBase>() 
            where TTokenProvider : TokenProvider<TTokenBase>
            where TTokenBase : TokenBase
        {
            _services.AddSingleton<TTokenProvider>();
            _services.AddSingleton<TokenProvider<TTokenBase>>(services => services.GetRequiredService<TTokenProvider>());

            return this;
        }
    }
}
